<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>class ffw::Promise | FineUtils</title>
    <meta name="description" content="A simple image reading and writing library">
    
    <meta name="keywords" content="ffw::Promise makeResolved makeResolved makeRejected Promise Promise Promise Promise ~Promise operator= operator= swap getException resolve resolve reject call getResult getResult getFuture then fail thenOrFail isResolved isRejected isFinished getStatus">
    <link rel="preload" href="/fineutils/assets/css/0.styles.d223fe93.css" as="style"><link rel="preload" href="/fineutils/assets/js/app.74561f1e.js" as="script"><link rel="preload" href="/fineutils/assets/js/18.b52d561c.js" as="script"><link rel="prefetch" href="/fineutils/assets/js/10.3c62b623.js"><link rel="prefetch" href="/fineutils/assets/js/11.d29e8911.js"><link rel="prefetch" href="/fineutils/assets/js/12.b87a26c5.js"><link rel="prefetch" href="/fineutils/assets/js/13.87cfa16b.js"><link rel="prefetch" href="/fineutils/assets/js/14.c5029159.js"><link rel="prefetch" href="/fineutils/assets/js/15.06573bf5.js"><link rel="prefetch" href="/fineutils/assets/js/16.30691f61.js"><link rel="prefetch" href="/fineutils/assets/js/17.96294274.js"><link rel="prefetch" href="/fineutils/assets/js/19.9526ddf3.js"><link rel="prefetch" href="/fineutils/assets/js/2.0cd6b169.js"><link rel="prefetch" href="/fineutils/assets/js/20.96ddbfe4.js"><link rel="prefetch" href="/fineutils/assets/js/21.af25357d.js"><link rel="prefetch" href="/fineutils/assets/js/22.c5c992aa.js"><link rel="prefetch" href="/fineutils/assets/js/23.731f140a.js"><link rel="prefetch" href="/fineutils/assets/js/24.d1afb958.js"><link rel="prefetch" href="/fineutils/assets/js/25.b9f53917.js"><link rel="prefetch" href="/fineutils/assets/js/26.e56cdd88.js"><link rel="prefetch" href="/fineutils/assets/js/27.d489e9c5.js"><link rel="prefetch" href="/fineutils/assets/js/28.cc41a3f7.js"><link rel="prefetch" href="/fineutils/assets/js/29.5ed4c267.js"><link rel="prefetch" href="/fineutils/assets/js/3.b78c508a.js"><link rel="prefetch" href="/fineutils/assets/js/30.d091dca9.js"><link rel="prefetch" href="/fineutils/assets/js/31.eb038c11.js"><link rel="prefetch" href="/fineutils/assets/js/32.f87a64df.js"><link rel="prefetch" href="/fineutils/assets/js/33.1c1745bc.js"><link rel="prefetch" href="/fineutils/assets/js/34.00e21abb.js"><link rel="prefetch" href="/fineutils/assets/js/35.e5506589.js"><link rel="prefetch" href="/fineutils/assets/js/36.d0cdaf43.js"><link rel="prefetch" href="/fineutils/assets/js/37.0c68e989.js"><link rel="prefetch" href="/fineutils/assets/js/38.28d0069f.js"><link rel="prefetch" href="/fineutils/assets/js/39.cead193d.js"><link rel="prefetch" href="/fineutils/assets/js/4.ef7e6009.js"><link rel="prefetch" href="/fineutils/assets/js/40.c9625c29.js"><link rel="prefetch" href="/fineutils/assets/js/41.63d7a3f5.js"><link rel="prefetch" href="/fineutils/assets/js/42.2dffa6bb.js"><link rel="prefetch" href="/fineutils/assets/js/43.6a5738bc.js"><link rel="prefetch" href="/fineutils/assets/js/44.2fca0e6e.js"><link rel="prefetch" href="/fineutils/assets/js/45.e6c6a386.js"><link rel="prefetch" href="/fineutils/assets/js/46.7a9dfc7f.js"><link rel="prefetch" href="/fineutils/assets/js/47.6251898b.js"><link rel="prefetch" href="/fineutils/assets/js/48.30c74eb3.js"><link rel="prefetch" href="/fineutils/assets/js/49.94f13daa.js"><link rel="prefetch" href="/fineutils/assets/js/5.0d9aabab.js"><link rel="prefetch" href="/fineutils/assets/js/50.23ad58c9.js"><link rel="prefetch" href="/fineutils/assets/js/51.da503d65.js"><link rel="prefetch" href="/fineutils/assets/js/52.7397c772.js"><link rel="prefetch" href="/fineutils/assets/js/53.75a72b58.js"><link rel="prefetch" href="/fineutils/assets/js/54.6100af4e.js"><link rel="prefetch" href="/fineutils/assets/js/55.ac5022d7.js"><link rel="prefetch" href="/fineutils/assets/js/56.22ad1a46.js"><link rel="prefetch" href="/fineutils/assets/js/57.cef34e29.js"><link rel="prefetch" href="/fineutils/assets/js/58.a1c76452.js"><link rel="prefetch" href="/fineutils/assets/js/59.5d3b2c1f.js"><link rel="prefetch" href="/fineutils/assets/js/6.ac0980d4.js"><link rel="prefetch" href="/fineutils/assets/js/60.a2d18322.js"><link rel="prefetch" href="/fineutils/assets/js/61.f56efb3a.js"><link rel="prefetch" href="/fineutils/assets/js/62.e2554740.js"><link rel="prefetch" href="/fineutils/assets/js/63.a8fb2842.js"><link rel="prefetch" href="/fineutils/assets/js/64.ff1d879e.js"><link rel="prefetch" href="/fineutils/assets/js/65.e215e19e.js"><link rel="prefetch" href="/fineutils/assets/js/66.e818b6ec.js"><link rel="prefetch" href="/fineutils/assets/js/7.3dc07c25.js"><link rel="prefetch" href="/fineutils/assets/js/8.f272e27b.js"><link rel="prefetch" href="/fineutils/assets/js/9.3c31b8d0.js">
    <link rel="stylesheet" href="/fineutils/assets/css/0.styles.d223fe93.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fineutils/" class="home-link router-link-active"><!----> <span class="site-name">FineUtils</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fineutils/" class="nav-link">Home</a></div><div class="nav-item"><a href="/fineutils/INSTALL.html" class="nav-link">Install</a></div><div class="nav-item"><a href="/fineutils/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="/fineutils/doxygen/modules.html" class="nav-link">Modules</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Classes</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/annotated.html" class="nav-link">Class List</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/classes.html" class="nav-link">Class Index</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/functions.html" class="nav-link">Function Index</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/variables.html" class="nav-link">Variable Index</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/enumerations.html" class="nav-link">Enumeration Index</a></li></ul></div></div><div class="nav-item"><a href="/fineutils/doxygen/files.html" class="nav-link">Files</a></div><div class="nav-item"><a href="/fineutils/doxygen/pages.html" class="nav-link">Pages</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fineutils/" class="nav-link">Home</a></div><div class="nav-item"><a href="/fineutils/INSTALL.html" class="nav-link">Install</a></div><div class="nav-item"><a href="/fineutils/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="/fineutils/doxygen/modules.html" class="nav-link">Modules</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Classes</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/annotated.html" class="nav-link">Class List</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/classes.html" class="nav-link">Class Index</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/functions.html" class="nav-link">Function Index</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/variables.html" class="nav-link">Variable Index</a></li><li class="dropdown-item"><!----> <a href="/fineutils/doxygen/enumerations.html" class="nav-link">Enumeration Index</a></li></ul></div></div><div class="nav-item"><a href="/fineutils/doxygen/files.html" class="nav-link">Files</a></div><div class="nav-item"><a href="/fineutils/doxygen/pages.html" class="nav-link">Pages</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>class ffw::Promise</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/fineutils/doxygen/classffw_1_1_promise.html#public-static-functions" class="sidebar-link">Public Static Functions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fineutils/doxygen/classffw_1_1_promise.html#public-functions" class="sidebar-link">Public Functions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fineutils/doxygen/classffw_1_1_promise.html#detailed-description" class="sidebar-link">Detailed Description</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fineutils/doxygen/classffw_1_1_promise.html#public-static-functions-documentation" class="sidebar-link">Public Static Functions Documentation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-makeresolved-1-2" class="sidebar-link">function makeResolved (1/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-makeresolved-2-2" class="sidebar-link">function makeResolved (2/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-makerejected" class="sidebar-link">function makeRejected</a></li></ul></li><li><a href="/fineutils/doxygen/classffw_1_1_promise.html#public-functions-documentation" class="sidebar-link">Public Functions Documentation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-1-4" class="sidebar-link">function Promise (1/4)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-2-4" class="sidebar-link">function Promise (2/4)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-3-4" class="sidebar-link">function Promise (3/4)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-4-4" class="sidebar-link">function Promise (4/4)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise" class="sidebar-link">function ~Promise</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-operator-1-2" class="sidebar-link">function operator= (1/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-operator-2-2" class="sidebar-link">function operator= (2/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-swap" class="sidebar-link">function swap</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getexception" class="sidebar-link">function getException</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-resolve-1-2" class="sidebar-link">function resolve (1/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-resolve-2-2" class="sidebar-link">function resolve (2/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-reject" class="sidebar-link">function reject</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-call" class="sidebar-link">function call</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getresult-1-2" class="sidebar-link">function getResult (1/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getresult-2-2" class="sidebar-link">function getResult (2/2)</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getfuture" class="sidebar-link">function getFuture</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-then" class="sidebar-link">function then</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-fail" class="sidebar-link">function fail</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-thenorfail" class="sidebar-link">function thenOrFail</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-isresolved" class="sidebar-link">function isResolved</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-isrejected" class="sidebar-link">function isRejected</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-isfinished" class="sidebar-link">function isFinished</a></li><li class="sidebar-sub-header"><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getstatus" class="sidebar-link">function getStatus</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="class-ffw-promise"><a href="#class-ffw-promise" aria-hidden="true" class="header-anchor">#</a> class ffw::Promise</h1> <p><a href="/fineutils/doxygen/annotated.html"><strong>Class List</strong></a> <strong>&gt;</strong> <a href="/fineutils/doxygen/namespaceffw.html"><strong>ffw</strong></a> <strong>::</strong> <a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active"><strong>Promise</strong></a></p> <p>A simple promise class with chainable lambdas. <a href="#detailed-description">More...</a></p> <p>Inherits the following classes: <strong><a href="/fineutils/doxygen/classffw_1_1_promise_interface.html">ffw::PromiseInterface</a></strong></p> <h2 id="public-static-functions"><a href="#public-static-functions" aria-hidden="true" class="header-anchor">#</a> Public Static Functions</h2> <table><thead><tr><th>Type</th> <th>Name</th></tr></thead> <tbody><tr><td>static std::enable_if&lt; std::is_same&lt; Q, void &gt;::value, <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; Q &gt; &gt;::type</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-makeresolved-1-2"><strong>makeResolved</strong></a> ()</td></tr> <tr><td>static std::enable_if&lt;!std::is_same&lt; Q, void &gt;::value, <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; Q &gt; &gt;::type</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-makeresolved-2-2"><strong>makeResolved</strong></a> (PromiseValue&lt; T &gt; &amp;&amp; value)</td></tr> <tr><td>static <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-makerejected"><strong>makeRejected</strong></a> (Args &amp;&amp;... args)</td></tr></tbody></table> <h2 id="public-functions"><a href="#public-functions" aria-hidden="true" class="header-anchor">#</a> Public Functions</h2> <table><thead><tr><th>Type</th> <th>Name</th></tr></thead> <tbody><tr><td></td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-1-4"><strong>Promise</strong></a> () <br>Default constructor with no lambda function.</td></tr> <tr><td></td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-2-4"><strong>Promise</strong></a> (F const &amp; lambda) <br>Constructor that accepts lambda.</td></tr> <tr><td></td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-3-4"><strong>Promise</strong></a> (<strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp;&amp; other) <br>Move constructor.</td></tr> <tr><td></td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise-4-4"><strong>Promise</strong></a> (const <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp; other) <br>Copy constructor.</td></tr> <tr><td></td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-promise"><strong>~Promise</strong></a> () = default</td></tr> <tr><td><strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-operator-1-2"><strong>operator=</strong></a> (const <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp; other)</td></tr> <tr><td><strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-operator-2-2"><strong>operator=</strong></a> (<strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp;&amp; other) <br>Move operator.</td></tr> <tr><td>void</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-swap"><strong>swap</strong></a> (<strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp; other)</td></tr> <tr><td>const std::exception_ptr &amp;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getexception"><strong>getException</strong></a> () const <br>Returns the exception associated with this promise.</td></tr> <tr><td>std::enable_if&lt; std::is_void&lt; Q &gt;::value, void &gt;::type</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-resolve-1-2"><strong>resolve</strong></a> () <br>Resolves the promise with a default value of type T.</td></tr> <tr><td>std::enable_if&lt;!std::is_void&lt; Q &gt;::value, void &gt;::type</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-resolve-2-2"><strong>resolve</strong></a> (PromiseValue&lt; T &gt; value) <br>Resolves the promise with a value of type T.</td></tr> <tr><td>virtual void</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-reject"><strong>reject</strong></a> (const std::exception_ptr &amp; eptr) override <br>Rejects the promise with an exception.</td></tr> <tr><td>virtual void</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-call"><strong>call</strong></a> () override <br>Calls the function within this promise.</td></tr> <tr><td>std::enable_if&lt;!std::is_void&lt; Q &gt;::value, Q &gt;::type</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getresult-1-2"><strong>getResult</strong></a> () const</td></tr> <tr><td>std::enable_if&lt; std::is_void&lt; Q &gt;::value, void &gt;::type</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getresult-2-2"><strong>getResult</strong></a> () const</td></tr> <tr><td>std::future&lt; T &gt;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getfuture"><strong>getFuture</strong></a> () const <br>Returns std::future<T></T></td></tr> <tr><td><strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; R &gt; &amp;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-then"><strong>then</strong></a> (Then const &amp; lambda)</td></tr> <tr><td><strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; T &gt; &amp;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-fail"><strong>fail</strong></a> (Fail const &amp; lambdaFail)</td></tr> <tr><td><strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>&lt; R &gt; &amp;</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-thenorfail"><strong>thenOrFail</strong></a> (Then const &amp; lambdaThen, Fail const &amp; lambdaFail)</td></tr> <tr><td>bool</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-isresolved"><strong>isResolved</strong></a> () const <br>Returns true if the promise has been resolved.</td></tr> <tr><td>bool</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-isrejected"><strong>isRejected</strong></a> () const <br>Returns true if the promise has been rejected.</td></tr> <tr><td>bool</td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-isfinished"><strong>isFinished</strong></a> () const <br>Returns true if the promise has been either resolved or rejected.</td></tr> <tr><td><strong><a href="/fineutils/doxygen/classffw_1_1_promise_interface.html#enum-status">Status</a></strong></td> <td><a href="/fineutils/doxygen/classffw_1_1_promise.html#function-getstatus"><strong>getStatus</strong></a> () const <br>Returns the status of the promise (REJECTED, RESOLVED, or WAITING)</td></tr></tbody></table> <h2 id="detailed-description"><a href="#detailed-description" aria-hidden="true" class="header-anchor">#</a> Detailed Description</h2> <p>This is a very simple implementation of JavaScript like <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong>. This promise can accept any kind of template type, including void. <strong><a href="/fineutils/doxygen/classffw_1_1_any.html">Any</a></strong> further chain links can be added by creating new <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong> instances using &quot;then&quot; and &quot;fail&quot; (or &quot;thenOrFail&quot;) methods. The template type of those new chain links is defined based on the return type of the lambda methods passed into &quot;then&quot; and &quot;fail&quot; methods.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Using lambda for the first promise is optional! </span>
<span class="token comment">// You can always resolve promise outside!</span>
ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some work</span>
    self<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> last <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// I am the first chain block to be executed</span>
    <span class="token comment">// and I will produce std::string</span>
    <span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// I am the second block</span>
    <span class="token comment">// and I must accept std::string because the previous</span>
    <span class="token comment">// chain link produces std::string</span>
    <span class="token comment">// But I will produce size_t</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// I am the third block</span>
    <span class="token comment">// I must accept size_t but I will cast it to int for no reason</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// I am the fail block</span>
    <span class="token comment">// I will be executed if any of the blocks above (or parent promise)</span>
    <span class="token comment">// produces exception that matches my lambda argument!</span>
    <span class="token comment">// However, I can't return anything! But the Promise chain link I produce</span>
    <span class="token comment">// matches the one before me, so anything after me is type of integer!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// I am the last final block and I must accept integer!</span>
    <span class="token comment">// However, I will produce float...</span>
    <span class="token keyword">return</span> <span class="token keyword">float</span><span class="token punctuation">(</span>val <span class="token operator">*</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Calls the promise lambda inside of it</span>
std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Resolved with: &quot;</span> <span class="token operator">&lt;&lt;</span> last<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// Prints: &quot;Resolved with: 144&quot;</span>
</code></pre></div><h2 id="public-static-functions-documentation"><a href="#public-static-functions-documentation" aria-hidden="true" class="header-anchor">#</a> Public Static Functions Documentation</h2> <h3 id="function-makeresolved-1-2"><a href="#function-makeresolved-1-2" aria-hidden="true" class="header-anchor">#</a> function makeResolved (1/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">static</span> std<span class="token operator">::</span>enable_if<span class="token operator">&lt;</span> std<span class="token operator">::</span>is_same<span class="token operator">&lt;</span> Q<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">&gt;</span><span class="token operator">::</span>value<span class="token punctuation">,</span> Promise<span class="token operator">&lt;</span> Q <span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">::</span>type ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>makeResolved <span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="function-makeresolved-2-2"><a href="#function-makeresolved-2-2" aria-hidden="true" class="header-anchor">#</a> function makeResolved (2/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">static</span> std<span class="token operator">::</span>enable_if<span class="token operator">&lt;</span><span class="token operator">!</span>std<span class="token operator">::</span>is_same<span class="token operator">&lt;</span> Q<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">&gt;</span><span class="token operator">::</span>value<span class="token punctuation">,</span> Promise<span class="token operator">&lt;</span> Q <span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">::</span>type ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>makeResolved <span class="token punctuation">(</span>
    PromiseValue<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;&amp;</span> value
<span class="token punctuation">)</span>
</code></pre></div><h3 id="function-makerejected"><a href="#function-makerejected" aria-hidden="true" class="header-anchor">#</a> function makeRejected</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">static</span> Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>makeRejected <span class="token punctuation">(</span>
    Args <span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args
<span class="token punctuation">)</span>
</code></pre></div><h2 id="public-functions-documentation"><a href="#public-functions-documentation" aria-hidden="true" class="header-anchor">#</a> Public Functions Documentation</h2> <h3 id="function-promise-1-4"><a href="#function-promise-1-4" aria-hidden="true" class="header-anchor">#</a> function Promise (1/4)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>Promise <span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Default constructor with no lambda function.</p> <h3 id="function-promise-2-4"><a href="#function-promise-2-4" aria-hidden="true" class="header-anchor">#</a> function Promise (2/4)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>Promise <span class="token punctuation">(</span>
    F <span class="token keyword">const</span> <span class="token operator">&amp;</span> lambda
<span class="token punctuation">)</span>
</code></pre></div><p>Constructor that accepts lambda.</p> <p>The lambda must accept one parameter, a reference to a promise, which is essentially a &quot;this&quot; pointer. You can use the parameter to either resolve or reject the promise.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> self<span class="token punctuation">)</span><span class="token punctuation">{</span>
    self<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
p<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="function-promise-3-4"><a href="#function-promise-3-4" aria-hidden="true" class="header-anchor">#</a> function Promise (3/4)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>Promise <span class="token punctuation">(</span>
    Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;&amp;</span> other
<span class="token punctuation">)</span>
</code></pre></div><p>Move constructor.</p> <h3 id="function-promise-4-4"><a href="#function-promise-4-4" aria-hidden="true" class="header-anchor">#</a> function Promise (4/4)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>Promise <span class="token punctuation">(</span>
    <span class="token keyword">const</span> Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> other
<span class="token punctuation">)</span>
</code></pre></div><p>Copy constructor.</p> <h3 id="function-promise"><a href="#function-promise" aria-hidden="true" class="header-anchor">#</a> function ~Promise</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">::</span><span class="token operator">~</span>Promise <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span>
</code></pre></div><h3 id="function-operator-1-2"><a href="#function-operator-1-2" aria-hidden="true" class="header-anchor">#</a> function operator= (1/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token keyword">const</span> Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> other
<span class="token punctuation">)</span>
</code></pre></div><h3 id="function-operator-2-2"><a href="#function-operator-2-2" aria-hidden="true" class="header-anchor">#</a> function operator= (2/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span>
    Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;&amp;</span> other
<span class="token punctuation">)</span>
</code></pre></div><p>Move operator.</p> <h3 id="function-swap"><a href="#function-swap" aria-hidden="true" class="header-anchor">#</a> function swap</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>swap <span class="token punctuation">(</span>
    Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> other
<span class="token punctuation">)</span>
</code></pre></div><h3 id="function-getexception"><a href="#function-getexception" aria-hidden="true" class="header-anchor">#</a> function getException</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">const</span> std<span class="token operator">::</span>exception_ptr <span class="token operator">&amp;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>getException <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns the exception associated with this promise.</p> <div class="tip custom-block"><p class="custom-block-title">Note:</p> <p>This function does not throw! If the promise has not been rejected, the returned value is an empty/invalid std::exception_ptr.</p></div> <h3 id="function-resolve-1-2"><a href="#function-resolve-1-2" aria-hidden="true" class="header-anchor">#</a> function resolve (1/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>enable_if<span class="token operator">&lt;</span> std<span class="token operator">::</span>is_void<span class="token operator">&lt;</span> Q <span class="token operator">&gt;</span><span class="token operator">::</span>value<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">&gt;</span><span class="token operator">::</span>type ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>resolve <span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Resolves the promise with a default value of type T.</p> <div class="tip custom-block"><p class="custom-block-title">Note:</p> <p>This function is only enabled on void types</p></div> <p>You can resolve the promis only once! Otherwise an exception <strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong> is thrown with error category of promise_already_satisfied is void</p> <p><strong>Exception:</strong></p> <ul><li><strong><strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong></strong> if the promise has already been resolved</li></ul> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Is resolved? &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">isResolved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// prints: Is resolved? 0</span>

p<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Is resolved? &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">isResolved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// prints: Is resolved? 1</span>
</code></pre></div><h3 id="function-resolve-2-2"><a href="#function-resolve-2-2" aria-hidden="true" class="header-anchor">#</a> function resolve (2/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>enable_if<span class="token operator">&lt;</span><span class="token operator">!</span>std<span class="token operator">::</span>is_void<span class="token operator">&lt;</span> Q <span class="token operator">&gt;</span><span class="token operator">::</span>value<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">&gt;</span><span class="token operator">::</span>type ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>resolve <span class="token punctuation">(</span>
    PromiseValue<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> value
<span class="token punctuation">)</span>
</code></pre></div><p>Resolves the promise with a value of type T.</p> <p>You can resolve the promis only once! Otherwise an exception <strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong> is thrown with error category of promise_already_satisfied</p> <div class="tip custom-block"><p class="custom-block-title">Note:</p> <p>This function is only enabled on non-void types</p></div> <p><strong>Exception:</strong></p> <ul><li><strong><strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong></strong> if the promise has already been resolved</li></ul> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Is resolved? &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">isResolved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// prints: Is resolved? 0</span>

p<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Is resolved? &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">isResolved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// prints: Is resolved? 1</span>

std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;result: &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// prints: result: 123</span>
</code></pre></div><h3 id="function-reject"><a href="#function-reject" aria-hidden="true" class="header-anchor">#</a> function reject</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>reject <span class="token punctuation">(</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>exception_ptr <span class="token operator">&amp;</span> eptr
<span class="token punctuation">)</span>
</code></pre></div><p>Rejects the promise with an exception.</p> <p>You can reject the promis only once! Otherwise an exception <strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong> is thrown with error category of promise_already_satisfied</p> <p><strong>Exception:</strong></p> <ul><li><strong><strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong></strong> if the promise has already been rejected</li></ul> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> std<span class="token operator">::</span><span class="token function">runtime_error</span><span class="token punctuation">(</span><span class="token string">&quot;Something went wrong&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">current_exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Implements <strong><a href="/fineutils/doxygen/classffw_1_1_promise_interface.html#function-reject">PromiseInterface::reject</a></strong></p> <h3 id="function-call"><a href="#function-call" aria-hidden="true" class="header-anchor">#</a> function call</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>call <span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Calls the function within this promise.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> self<span class="token punctuation">)</span><span class="token punctuation">{</span>
    self<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
p<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Implements <strong><a href="/fineutils/doxygen/classffw_1_1_promise_interface.html#function-call">PromiseInterface::call</a></strong></p> <h3 id="function-getresult-1-2"><a href="#function-getresult-1-2" aria-hidden="true" class="header-anchor">#</a> function getResult (1/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>enable_if<span class="token operator">&lt;</span><span class="token operator">!</span>std<span class="token operator">::</span>is_void<span class="token operator">&lt;</span> Q <span class="token operator">&gt;</span><span class="token operator">::</span>value<span class="token punctuation">,</span> Q <span class="token operator">&gt;</span><span class="token operator">::</span>type ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>getResult <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns the resul of this promise</p> <div class="tip custom-block"><p class="custom-block-title">Note:</p> <p>This function is only enabled on non-void types</p></div> <p><strong>Exception:</strong></p> <ul><li><strong><strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong></strong> if the promise has not yet been resolved or rejected</li> <li><strong>E</strong> if the promise has been rejected with exception of type E</li></ul> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Result: &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// Prints &quot;Result: 42&quot;</span>
</code></pre></div><h3 id="function-getresult-2-2"><a href="#function-getresult-2-2" aria-hidden="true" class="header-anchor">#</a> function getResult (2/2)</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>enable_if<span class="token operator">&lt;</span> std<span class="token operator">::</span>is_void<span class="token operator">&lt;</span> Q <span class="token operator">&gt;</span><span class="token operator">::</span>value<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">&gt;</span><span class="token operator">::</span>type ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>getResult <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns the resul of this promise</p> <div class="tip custom-block"><p class="custom-block-title">Note:</p> <p>This function is only enabled on void types</p></div> <p><strong>Exception:</strong></p> <ul><li><strong><strong><a href="/fineutils/doxygen/classffw_1_1_promise_exception.html">PromiseException</a></strong></strong> if the promise has not yet been resolved or rejected</li> <li><strong>E</strong> if the promise has been rejected with exception of type E</li></ul> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Resolved? &quot;</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span><span class="token function">isResolved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// Prints &quot;Resolved? 1&quot;</span>
</code></pre></div><h3 id="function-getfuture"><a href="#function-getfuture" aria-hidden="true" class="header-anchor">#</a> function getFuture</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>future<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>getFuture <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns std::future<T></T></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token operator">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">bool</span> val<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> val <span class="token operator">?</span> <span class="token number">123</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>future_status status <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">wait_for</span><span class="token punctuation">(</span>std<span class="token operator">::</span>chrono<span class="token operator">::</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Waits for one second</span>
<span class="token comment">// Status is std::future_status::timeout because promise has not been resolved</span>

p<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
status <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">wait_for</span><span class="token punctuation">(</span>std<span class="token operator">::</span>chrono<span class="token operator">::</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Status is now std::future_status::ready!</span>

std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;result: &quot;</span> <span class="token operator">&lt;&lt;</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token comment">// prints result: 123</span>
</code></pre></div><h3 id="function-then"><a href="#function-then" aria-hidden="true" class="header-anchor">#</a> function then</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Promise<span class="token operator">&lt;</span> R <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>then <span class="token punctuation">(</span>
    Then <span class="token keyword">const</span> <span class="token operator">&amp;</span> lambda
<span class="token punctuation">)</span>
</code></pre></div><p>Creates a new then chain link with lambda
The lambda will be executed once the parent (the instance of the method you are calling) has been be resolved. The return value of lambda determines the template type of the <strong><a href="/fineutils/doxygen/classffw_1_1_promise.html" class="router-link-exact-active router-link-active">Promise</a></strong> returned. For example, you create a promise that performs an SQL query which returns a raw string. Your next &quot;then&quot; chain link can have a lambda that accepts a string and produces an instance of class. You can then extend the chain even further by another &quot;then&quot; which accepts the instance of class and produces bool or anything else.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span> p<span class="token punctuation">;</span>

ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> next <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Parent promise was resolved with: &quot;</span> <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> last <span class="token operator">=</span> next<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Received integer of: &quot;</span> <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Prints: &quot;Parent promise was resolved with: Hello!&quot;</span>
<span class="token comment">//         &quot;Received integer of: 6&quot;</span>

<span class="token comment">// You don't need to explicitly declare the instances of promises as above</span>
<span class="token comment">// You can make them more simple as below:</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">int</span> <span class="token punctuation">{</span>
      std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Parent promise was resolved with: &quot;</span> <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Received integer of: &quot;</span> <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="function-fail"><a href="#function-fail" aria-hidden="true" class="header-anchor">#</a> function fail</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Promise<span class="token operator">&lt;</span> T <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>fail <span class="token punctuation">(</span>
    Fail <span class="token keyword">const</span> <span class="token operator">&amp;</span> lambdaFail
<span class="token punctuation">)</span>
</code></pre></div><p>Creates a new fail chain link with lambda
The lambda will be executed once the parent (the instance of the method you are calling) has been be rejected.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span> p<span class="token punctuation">;</span>

ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> next <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>runtime_exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;runtime_exception has been thrown!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> last <span class="token operator">=</span> next<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;raw exception has been thrown!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ffw<span class="token operator">::</span>Promise<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> test <span class="token operator">=</span> last<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>exception_ptr<span class="token operator">&amp;</span> eptr<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        std<span class="token operator">::</span><span class="token function">rethrow_exception</span><span class="token punctuation">(</span>eptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>runtime_exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Caught runtime_exception!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Caught raw exception!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span>rejectWith<span class="token operator">&lt;</span>std<span class="token operator">::</span>runtime_exception<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Prints: &quot;runtime_exception has been thrown!&quot;</span>
<span class="token comment">//         &quot;raw exception has been thrown!&quot;</span>
<span class="token comment">//         &quot;Caught runtime_exception!&quot;</span>
<span class="token comment">// Both first two &quot;fail&quot; lambdas will be called because both raw std::exception</span>
<span class="token comment">// and std::runtime_error match the exception thrown.</span>
<span class="token comment">// The last fail lambda will also be called because it accepts any exception in form of </span>
<span class="token comment">// std::exception_ptr</span>
</code></pre></div><h3 id="function-thenorfail"><a href="#function-thenorfail" aria-hidden="true" class="header-anchor">#</a> function thenOrFail</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Promise<span class="token operator">&lt;</span> R <span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>thenOrFail <span class="token punctuation">(</span>
    Then <span class="token keyword">const</span> <span class="token operator">&amp;</span> lambdaThen<span class="token punctuation">,</span>
    Fail <span class="token keyword">const</span> <span class="token operator">&amp;</span> lambdaFail
<span class="token punctuation">)</span>
</code></pre></div><p>Creates a new then + fail chain link with lambda
Similarly with &quot;then&quot; and &quot;fail&quot; methods, you can combine those two and create one chain link that will contain both &quot;then&quot; and &quot;fail&quot; lambdas.</p> <h3 id="function-isresolved"><a href="#function-isresolved" aria-hidden="true" class="header-anchor">#</a> function isResolved</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">bool</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>isResolved <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns true if the promise has been resolved.</p> <h3 id="function-isrejected"><a href="#function-isrejected" aria-hidden="true" class="header-anchor">#</a> function isRejected</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">bool</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>isRejected <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns true if the promise has been rejected.</p> <h3 id="function-isfinished"><a href="#function-isfinished" aria-hidden="true" class="header-anchor">#</a> function isFinished</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">bool</span> ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>isFinished <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns true if the promise has been either resolved or rejected.</p> <h3 id="function-getstatus"><a href="#function-getstatus" aria-hidden="true" class="header-anchor">#</a> function getStatus</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Status ffw<span class="token operator">::</span>Promise<span class="token operator">::</span>getStatus <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre></div><p>Returns the status of the promise (REJECTED, RESOLVED, or WAITING)</p> <hr> <p>The documentation for this class was generated from the following file: <code>include/ffw/utils/promise.h</code></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/fineutils/assets/js/18.b52d561c.js" defer></script><script src="/fineutils/assets/js/app.74561f1e.js" defer></script>
  </body>
</html>
